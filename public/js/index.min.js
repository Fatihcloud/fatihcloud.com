async function fetchSpotifyData(n){const t=await fetch("https://gucdydqpcumzkdpesnrx.supabase.co/functions/v1/spot-cloud",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imd1Y2R5ZHFwY3VtemtkcGVzbnJ4Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3MjUwOTQ3NjksImV4cCI6MjA0MDY3MDc2OX0.4supRC-Gc1DVmSNbilY_DV4g4mCMPxq-QuD8unmIPww"},body:JSON.stringify({action:n})});return t.ok?await t.json():(console.error("Failed to fetch data from Supabase function:",t.status),null)}async function fetchCurrentlyPlaying(){const n=document.getElementById("spotify-now-playing");if(!n)return void console.error('Element with id "spotify-now-playing" not found.');n.innerHTML='<p class="text-black dark:text-white">Loading...</p>';const t=await fetchSpotifyData("currently-playing");if(t)if("No Song Playing"!==t.message&&t.songName){const{songName:e,artistName:i,albumImage:o,albumName:a,songUrl:s,progressPercentage:r}=t;n.innerHTML=`\n        <div class="spotify-container">\n          <div class="spotify-background" style="background-image: url(${o});"></div>\n          <div class="spotify-content">\n            <div class="spotify-image">\n              <img src="${o}" alt="Album Art">\n            </div>\n            <div class="spotify-text">\n              <p class="song-name">${e}</p>\n              <p class="artist-name" onclick="alert('Sanatçı: ${i}')">by ${i}</p>\n              <p class="album-name">Album: ${a}</p>\n              <div class="spotify-progress">\n                <div class="spotify-progress-bar" style="width: ${r}%;"></div>\n              </div>\n            </div>\n            <div class="spotify-link">\n              <a href="${s}" target="_blank">Listen on Spotify</a>\n            </div>\n          </div>\n        </div>\n      `,document.querySelector(".spotify-background").addEventListener("mouseover",function(){this.style.transform="scale(1.05)"}),document.querySelector(".spotify-background").addEventListener("mouseout",function(){this.style.transform="scale(1)"}),document.querySelector(".spotify-image img").addEventListener("mouseover",function(){this.style.transform="scale(1.1)"}),document.querySelector(".spotify-image img").addEventListener("mouseout",function(){this.style.transform="scale(1)"})}else n.innerHTML='\n        <div class="spotify-container">\n          <div class="spotify-content">\n            <div class="spotify-image">\n              <img src="https://upload.wikimedia.org/wikipedia/commons/8/84/Spotify_icon.svg" alt="No Song Playing" />\n            </div>\n            <div class="spotify-text">\n              <p class="song-name">No Song Playing</p>\n              <p class="artist-name">Feel free to play something on Spotify!</p>\n              <div class="spotify-link">\n                <a href="https://open.spotify.com" target="_blank" class="listen-button">Open Spotify</a>\n              </div>\n            </div>\n          </div>\n        </div>\n      ';else n.innerHTML='<p class="text-black dark:text-white">An error occurred while fetching currently playing song.</p>'}async function fetchRecentlyPlayed(){const n=document.getElementById("spotify-recently-played");if(!n)return void console.error('Element with id "spotify-recently-played" not found.');n.innerHTML='<p class="text-black dark:text-white">Loading...</p>';const t=await fetchSpotifyData("recently-played");if(t&&t.length>0){const e=t.map(({songName:n,artistName:t,albumImage:e,songUrl:i})=>`\n          <div class="spotify-container">\n            <div class="spotify-background" style="background-image: url(${e});"></div>\n            <div class="spotify-content">\n              <div class="spotify-image">\n                <img src="${e}" alt="Album Art">\n              </div>\n              <div class="spotify-text">\n                <p class="song-name">${n}</p>\n                <p class="artist-name">by ${t}</p>\n                <div class="spotify-link">\n                  <a href="${i}" target="_blank" class="listen-button">Listen on Spotify</a>\n                </div>\n              </div>\n            </div>\n          </div>\n        `).join("");n.innerHTML=e}else n.innerHTML='<p class="text-black dark:text-white">No recently played songs found.</p>'}const styles="\n  /* Anlık çalan şarkı için stiller */\n  #spotify-now-playing .spotify-container {\n    position: relative;\n    padding: 16px;\n    border-radius: 16px;\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n    overflow: hidden;\n    animation: fadeIn 0.5s ease-in-out;\n  }\n\n  #spotify-now-playing .spotify-background {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-size: cover;\n    background-position: center;\n    filter: blur(2px);\n    opacity: 0.3;\n    transition: transform 0.3s ease-in-out;\n    transform: scale(1);\n  }\n\n  #spotify-now-playing .spotify-content {\n    position: relative;\n    z-index: 10;\n    display: flex;\n    align-items: center;\n    background-color: rgba(0, 0, 0, 0.4);\n    border-radius: 16px;\n    backdrop-filter: blur(2px);\n    padding: 12px;\n    transition: all 0.3s ease-in-out;\n  }\n\n  #spotify-now-playing .spotify-image img {\n    width: 64px;\n    height: 64px;\n    border-radius: 8px;\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n    transition: transform 0.3s ease-in-out;\n  }\n\n  #spotify-now-playing .spotify-text {\n    flex: 1;\n    padding: 8px;\n    text-align: left;\n  }\n\n  #spotify-now-playing .spotify-text .song-name {\n    color: white;\n    font-weight: bold;\n    font-size: 1rem;\n    margin: 0;\n  }\n\n  #spotify-now-playing .spotify-text .artist-name {\n    color: rgba(255, 255, 255, 0.7);\n    font-size: 0.875rem;\n    margin: 0;\n    cursor: pointer;\n    text-decoration: underline;\n  }\n\n  #spotify-now-playing .spotify-text .album-name {\n    color: rgba(255, 255, 255, 0.6);\n    font-size: 0.75rem;\n  }\n\n  #spotify-now-playing .spotify-progress {\n    width: 100%;\n    height: 4px;\n    background-color: rgba(255, 255, 255, 0.3);\n    border-radius: 2px;\n    margin-top: 8px;\n  }\n\n  #spotify-now-playing .spotify-progress-bar {\n    height: 100%;\n    background-color: #1DB954;\n    border-radius: 2px;\n  }\n\n  #spotify-now-playing .spotify-link a {\n    color: #1DB954;\n    text-decoration: underline;\n    font-size: 0.875rem;\n    transition: color 0.3s ease-in-out;\n  }\n\n  /* Recently Played için stiller */\n  #spotify-recently-played {\n    display: flex;\n    flex-wrap: wrap; /* Sıraları sar */\n    justify-content: space-between; /* Alanı eşit dağıt */\n  }\n\n  #spotify-recently-played .spotify-container {\n    width: calc(50% - 8px); /* 2 sütun için genişlik ayarı */\n    margin: 4px; /* Kenar boşluğu ekleyin */\n    position: relative;\n    padding: 16px;\n    border-radius: 16px;\n    box-shadow: 0 4px 10px rgba(0, 0, 0, 0.3);\n    overflow: hidden;\n    animation: fadeIn 0.5s ease-in-out;\n  }\n\n  #spotify-recently-played .spotify-background {\n    position: absolute;\n    top: 0;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    background-size: cover;\n    background-position: center;\n    filter: blur(2px); /* Daha fazla bulanıklık ekleyebilirsiniz */\n    opacity: 0.3; /* Arka planın daha soluk görünmesi için */\n    z-index: 1; /* İçerik arkasında kalması için */\n  }\n\n  #spotify-recently-played .spotify-content {\n    display: flex;\n    align-items: center;\n    background-color: rgba(0, 0, 0, 0.5); /* İçerik arka plan rengi */\n    border-radius: 16px;\n    backdrop-filter: blur(2px);\n    padding: 12px;\n    position: relative;\n    z-index: 2; /* İçeriği ön plana almak için */\n    transition: all 0.3s ease-in-out;\n  }\n\n  #spotify-recently-played .spotify-image img {\n    width: 48px;\n    height: 48px;\n    border-radius: 4px;\n    margin-right: 8px;\n  }\n\n  #spotify-recently-played .spotify-text {\n    flex: 1;\n    padding: 8px;\n    text-align: left;\n  }\n\n  #spotify-recently-played .spotify-text .song-name {\n    color: white;\n    font-weight: bold;\n    font-size: 1rem;\n    margin: 0;\n  }\n\n  #spotify-recently-played .spotify-text .artist-name {\n    color: rgba(255, 255, 255, 0.7);\n    font-size: 0.875rem;\n    margin: 0;\n  }\n\n  #spotify-recently-played .spotify-link a {\n    color: #1DB954;\n    text-decoration: underline;\n    font-size: 0.875rem;\n    transition: color 0.3s ease-in-out;\n  }\n\n  /* Mobil uyumluluk */\n  @media (max-width: 768px) {\n    #spotify-now-playing .spotify-container {\n      padding: 12px;\n    }\n\n    #spotify-now-playing .spotify-text {\n      padding: 4px;\n    }\n\n    #spotify-now-playing .spotify-image img {\n      width: 48px;\n      height: 48px;\n    }\n\n    #spotify-recently-played .spotify-container {\n      width: calc(100% - 16px); /* 1 sütun için genişlik ayarı */\n      margin: 8px 0; /* Üst ve alt kenar boşlukları */\n    }\n\n    #spotify-recently-played .spotify-image img {\n      width: 40px;\n      height: 40px;\n    }\n\n    #spotify-recently-played .spotify-text {\n      padding: 4px;\n    }\n  }\n";document.addEventListener("DOMContentLoaded",()=>{const n=document.createElement("style");n.type="text/css",n.innerText=styles,document.head.appendChild(n),fetchCurrentlyPlaying(),fetchRecentlyPlayed(),setInterval(fetchCurrentlyPlaying,3e4),setInterval(fetchRecentlyPlayed,6e4)});